<?php
session_start();

class users{
	public $host = "localhost";
	public $username = "root";
	public $password = "";
	public $dbname = "opentest";
	public $conn;
	public $data;
	
		public function __construct()
		{
			$this->conn = new mysqli($this->host,$this->username,$this->password,$this->dbname);
			if($this->conn->connect_errno)
			{
				die("Database connection failed:".$this->conn->connect_errno);
			}	
		}
		public function signup($data)
		{
			$this->conn->query($data);
			return true;
		}
		
		public function login($email, $password)
		{	
			$email = $_POST['email'];
			$pass = $_POST['password'];
            $newPass = md5($pass);
            $query = $this->conn->query("SELECT * FROM `members` WHERE email = '$email' AND password = '$newPass'");
            $row = $query->fetch_array(MYSQLI_ASSOC);
            if($query->num_rows>0)
            {
				$_SESSION['mid'] = $row['member_id'];
                $_SESSION['email'] = $email;
                return true;
            }
            else
            {
                return false;
            }
		}
		public function url($url)
		{
			header("location:".$url);
		}
	}
?>