<?php 

class DemoClass
{
    protected $db;
 
    function __construct()
    {
        $this->db = DB();
    }
 
    /**
     * register new user
     *
     * @param $first_name
     * @param $last_name
     * @param $email
     * @param $password
     *
     * @return bool
     */
    public function Register($first_name, $last_name, $email, $password)
    {
        $first_name = mysqli_real_escape_string($this->db, $first_name);
        $last_name = mysqli_real_escape_string($this->db, $last_name);
        $email = mysqli_real_escape_string($this->db, $email);
        $password = mysqli_real_escape_string($this->db, $password);
        $password = password_hash($password, PASSWORD_DEFAULT, ['cost' => 11]);
        $email_activation_key = md5($email . $first_name . $last_name);
 
        $query = "INSERT INTO `users`(first_name, last_name, email, password, email_activation_key)
                  VALUES ('$first_name', '$last_name', '$email', '$password', '$email_activation_key')";
        if (!$result = mysqli_query($this->db, $query)) {
            exit(mysqli_error($this->db));
        }
 
        // send email
        $this->sendEmail('Verify Your Email Address', $email, $first_name, $email_activation_key);
 
        return TRUE;
    }
?>